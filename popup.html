<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Progress Summary</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header>
    <div class="header-left">
      <img src="icon48.png" class="logo" alt="logo">
      <h1>Your Saved Progress</h1>
    </div>
    <div class="header-right">
      <button id="openDashboard" class="icon-btn" aria-label="Open dashboard" title="Dashboard">ğŸ“Š</button>
      <button id="openAssistant" class="icon-btn" aria-label="Open assistant" title="Assistant">ğŸ¤–</button>
      <button id="openCalendar" class="icon-btn" aria-label="Open calendar" title="Open calendar">ğŸ“…</button>
      <!-- Top-right theme toggle -->
      <button id="themeToggle" class="theme-toggle" aria-label="Toggle light/dark" title="Toggle light/dark mode" aria-pressed="false">
        <span class="icon">ğŸŒ</span>
      </button>
    </div>
  </header>

  <div class="container">
    <section class="search-section">
      <input id="searchBookmarks" type="text" placeholder="ğŸ” Search bookmarks..." />
    </section>
    <div class="actions">
      <button id="addCurrent" class="btn accent">+ Add Current Page</button>
      <button id="restoreAll" class="btn">Restore All</button>
      <button id="clearAll" class="btn secondary">Clear All</button>
    </div>

    <section class="toolbar card">
      <div class="row">
        <label for="sortBy">Sort by</label>
        <select id="sortBy">
          <option value="date_desc">Recent</option>
          <option value="title_asc">Title (Aâ†’Z)</option>
          <option value="progress_desc">Progress</option>
        </select>
        <button id="viewToggle" class="btn">Toggle View</button>
        <label style="margin-left:auto;display:flex;align-items:center;gap:6px">
          <input type="checkbox" id="pinnedOnly" /> Pinned only
        </label>
      </div>
      <div class="row" id="quickStats" style="font-size:13px;opacity:0.9"></div>
    </section>

    

    <section id="bookmarks" class="card">
      <h2>â­ Saved Items</h2>
      <div id="bookmarkList" class="list">Loading saved contentâ€¦</div>
    </section>

    



  </div>

  <!-- Calendar Modal -->
  <div id="calendarModal" class="modal" aria-hidden="true" role="dialog" aria-label="Calendar">
    <div class="modal-content">
      <div class="modal-header">
        <h3>ğŸ“… Scheduled Tasks</h3>
        <button id="closeCalendar" class="icon-btn" aria-label="Close">âœ–</button>
      </div>
      <div id="calendarContainer">
        <div class="calendar-header">
          <button id="prevMonth" class="btn secondary">â†</button>
          <span id="currentMonth"></span>
          <button id="nextMonth" class="btn secondary">â†’</button>
        </div>
        <div id="calendarGrid"></div>
      </div>
      <div class="schedule-form">
        <h3>ğŸ“ Schedule New Task</h3>
        <input id="taskTitle" type="text" placeholder="Task title or page URL" />
        <input id="taskDate" type="date" />
        <button id="scheduleTask" class="btn accent">Schedule</button>
      </div>
    </div>
  </div>

  <!-- Assistant Modal -->
  <div id="assistantModal" class="modal" aria-hidden="true" role="dialog" aria-label="Assistant">
    <div class="modal-content">
      <div class="modal-header">
        <h3>ğŸ§  Assistant</h3>
        <button id="closeAssistant" class="icon-btn" aria-label="Close">âœ–</button>
      </div>
      <div class="row" style="gap:8px;flex-wrap:wrap;align-items:center">
        <label for="assistantBookmark">Bookmark</label>
        <select id="assistantBookmark" style="min-width:220px"></select>
        <button id="assistantLoadBookmark" class="btn">Load</button>
      </div>
      <div class="row" style="gap:8px;align-items:center;flex-wrap:wrap">
        <label for="modeSelect">Mode</label>
        <select id="modeSelect">
          <option value="summarize">Summarize</option>
          <option value="rewrite">Rewrite / Proofread</option>
          <option value="translate">Translate</option>
          <option value="template">Prompt Templates</option>
        </select>
        <div id="modeOptions" style="display:flex;gap:8px;flex-wrap:wrap;align-items:center">
          <label id="summaryStyleWrap" for="summaryStyle">
            <span style="margin-right:4px">Style</span>
            <select id="summaryStyle">
              <option value="bullet">Bullet points</option>
              <option value="short">Short</option>
              <option value="long">Long</option>
              <option value="takeaways">Key takeaways</option>
            </select>
          </label>
          <label id="rewriteToneWrap" for="rewriteTone" style="display:none">
            <span style="margin-right:4px">Tone</span>
            <select id="rewriteTone">
              <option value="formal">Formal</option>
              <option value="casual">Casual</option>
              <option value="concise">Concise</option>
              <option value="creative">Creative</option>
            </select>
          </label>
          <label id="translateLangWrap" for="translateLang" style="display:none">
            <span style="margin-right:4px">Target</span>
            <input id="translateLang" type="text" placeholder="e.g., Spanish" style="width:140px" />
          </label>
          <label id="templateSelectWrap" for="templateSelect" style="display:none">
            <span style="margin-right:4px">Template</span>
            <select id="templateSelect">
              <option value="linkedin">Generate LinkedIn post</option>
              <option value="studynotes">Make study notes</option>
            </select>
          </label>
          <label id="intentWrap" for="assistantIntent" style="margin-left:auto">
            <span style="margin-right:4px">Intent</span>
            <select id="assistantIntent">
              <option value="default">Default</option>
              <option value="study">Study notes</option>
              <option value="share">Shareable post</option>
              <option value="todo">Summarize and schedule task</option>
            </select>
          </label>
        </div>
      </div>
      <div style="display:flex;flex-direction:column;gap:8px;margin-top:8px">
        <textarea id="assistantInput" rows="4" placeholder="Paste text, or use Current Page to auto-extract..." style="width:100%;resize:vertical"></textarea>
        <div style="display:flex;gap:8px;flex-wrap:wrap">
          <button id="assistantUseCurrent" class="btn">Use Current Page</button>
          <button id="assistantRun" class="btn accent">Run</button>
        </div>
        <div id="assistantOutput" class="card" style="background:var(--item-bg)"></div>
      </div>
    </div>
  </div>

  <!-- Dashboard Modal -->
  <div id="dashboardModal" class="modal" aria-hidden="true" role="dialog" aria-label="Dashboard">
    <div class="modal-content">
      <div class="modal-header">
        <h3>ğŸ“Š Dashboard</h3>
        <button id="closeDashboard" class="icon-btn" aria-label="Close">âœ–</button>
      </div>
      <div class="row" style="gap:10px;flex-wrap:wrap">
        <div>Saved: <strong id="overviewTotal">0</strong></div>
        <div>Pinned: <strong id="overviewPinned">0</strong></div>
        <div>Streak: <strong id="overviewStreak">0</strong></div>
        <div>Assistant Avg Latency: <strong id="overviewLatency">â€”</strong></div>
      </div>
      <div class="row" style="gap:6px;flex-wrap:wrap;margin-top:8px">
        <button id="filterAll" class="btn">All</button>
        <button id="filterHigh" class="btn">High progress (â‰¥70%)</button>
        <button id="filterMid" class="btn">Mid (30â€“69%)</button>
        <button id="filterLow" class="btn">Low (&lt;30%)</button>
      </div>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>